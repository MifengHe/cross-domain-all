<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Main App</title>
    <script type="text/javascript" src="./cross-domain-main.js"></script>
</head>
<body>
<h1>Main App</h1>
    <button onclick="sendRandom()">send Random</button>
    <iframe name="baidu" src="http://127.0.0.1:8080/sub.html?url=http://localhost:8080/cross-domain-main.html" style="border: none; width: 100%; height: 500px;"></iframe>
    <script type="text/javascript">
        var main = new CrossDomainMain('baidu', 'http://127.0.0.1:8080/cross-domain-sub.html');
        console.log('main', main);

        function sendRandom() {
            main.dispatch("sendRandom", new Date().getTime(), function () {
                console.log(1, 'callback', arguments);
            });
        }

        main.action('popup', function(payload) {
           console.log('popup', payload);
        });
    </script>
</body>
</html>